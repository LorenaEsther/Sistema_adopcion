<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
    <head th:replace="~{Admin/adminTemplate :: header}">
        <meta name="_csrf" content="${_csrf.token}"/>
        <meta name="_csrf_header" content="${_csrf.headerName}"/>
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.css">
        <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
        <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    </head>
    <body>
        <div class="wrapper">
            <!-- Fondo -->
            <div th:replace="~{Admin/adminTemplate :: background}"></div>

            <!-- Sidebar -->
            <aside th:replace="~{Admin/adminTemplate :: sidebar}"></aside>

            <!-- Contenido Principal -->
            <div class="main p-3">
                <div class="m-2 mx-4">
                    <!-- Menú de Navegación -->
                    <aside th:replace="~{Admin/adminTemplate :: nav-menu}"></aside>

                    <!-- Contenido del Dashboard -->
                    <div class="text-center">
                        <h1 style="color: #919CD9; margin-top: 20px;">Dashboard</h1>
                        <div class="row mt-5">
                            <div class="col-md-3">
                                <div class="card text-center">
                                    <div class="card-body">
                                        <h5 class="card-title">Gatos Disponibles</h5>
                                        <p class="card-text" th:text="${gatosDisponibles}"></p>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="card text-center">
                                    <div class="card-body">
                                        <h5 class="card-title">Solicitudes Pendientes</h5>
                                        <p class="card-text" th:text="${solicitudesPendientes}"></p>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="card text-center">
                                    <div class="card-body">
                                        <h5 class="card-title">Total Adopciones</h5>
                                        <p class="card-text" th:text="${totalAdopciones}"></p>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="card text-center">
                                    <div class="card-body">
                                        <h5 class="card-title">Usuarios Registrados</h5>
                                        <p class="card-text" th:text="${usuariosRegistrados}"></p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="row mt-5 justify-content-center align-items-center">
                        <!-- Gráfico de Barras -->
                        <div class="col-md-5 d-flex justify-content-center">
                            <div style="width: 600px; height: 400px;">
                                <canvas id="graficoBarras"></canvas>
                            </div>
                        </div>

                        <!-- Gráfico de Pastel -->
                        <div class="col-md-5 d-flex justify-content-center">
                            <div style="width: 500px; height: 500px;">
                                <canvas id="graficoPastel"></canvas>
                            </div>
                        </div>
                    </div>

                </div>
            </div>
        </div>

        <!--Boton imprimir reporte-->
        <div class="text-center" style="margin-top: -10px;">
            <button class="btn btn-primary" style="background-color: #B1BF49; border-color: #B1BF49;" onclick="imprimirReporte()">
                Generar PDF del Reporte
            </button>
        </div>


        <!-- Scripts -->
        <div th:replace="~{Admin/adminTemplate :: scripts}"></div>

        <!-- Bootstrap y SweetAlert -->
        <script th:inline="javascript" th:src="@{/js/register.js}"></script>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
        <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.4.0/jspdf.umd.min.js"></script>


        <!-- Variables Thymeleaf para los gráficos -->
        <script>
        // Variables globales generadas con Thymeleaf
        const gatosDisponibles = [[${gatosDisponibles
        }
        ]];
        const solicitudesPendientes = [[${solicitudesPendientes
        }
        ]];
        const totalAdopciones = [[${totalAdopciones
        }
        ]];
        const usuariosRegistrados = [[${usuariosRegistrados
        }
        ]];
        </script>


        <!-- Enlace al archivo externo de gráficos -->
        <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
        <script th:src="@{/js/dashboard-charts.js}"></script>

    </body>
</html>
